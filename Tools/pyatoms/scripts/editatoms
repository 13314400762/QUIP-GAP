#!/usr/bin/env ipython

atoms_dict = {}

def load_atoms(files):
   " Load files into atoms_dict and create named references at module level."
   for xyzfile in files:
      name = os.path.basename(xyzfile)
      if name[-4:] == '.xyz':
         name = name[:-4]

      atoms_dict[name] = Atoms(xyzfile)
      print '%s -> Atoms(%s)' % (xyzfile, name)
      setattr(sys.modules[__name__], name, atoms_dict[name])


def save_atoms():
   " Save all atoms in atoms_dict back to their respective XYZ files."
   for name in atoms_dict.keys():
      print 'Atoms(%s) -> %s.xyz' % (name, name)
      xyz = open(name+'.xyz','w')
      atoms_dict[name].write(xyz)
      xyz.close()


eye = AtomEye()
eye.set_atoms(atoms_dict)
